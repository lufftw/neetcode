# AI Markmap Agent

> ä¸€å€‹å¯é…ç½®ã€å¯æ“´å±•çš„å¤š Agent å”ä½œå¼ AI ç³»çµ±ï¼Œä½¿ç”¨ LangGraph ç”Ÿæˆèˆ‡å„ªåŒ– Markmapã€‚

[![LangGraph](https://img.shields.io/badge/LangGraph-v1.0.4-blue)](https://github.com/langchain-ai/langgraph)
[![Python](https://img.shields.io/badge/Python-3.10+-green)](https://python.org)
[![License](https://img.shields.io/badge/License-MIT-yellow)](LICENSE)

## ğŸ“‹ ç›®éŒ„

- [æ¦‚è¿°](#æ¦‚è¿°)
- [ç³»çµ±æ¶æ§‹](#ç³»çµ±æ¶æ§‹)
- [å·¥ä½œæµç¨‹éšæ®µ](#å·¥ä½œæµç¨‹éšæ®µ)
- [å®‰è£](#å®‰è£)
- [é…ç½®](#é…ç½®)
- [ä½¿ç”¨æ–¹å¼](#ä½¿ç”¨æ–¹å¼)
- [Agent èƒ½åŠ›æ¨¡çµ„](#agent-èƒ½åŠ›æ¨¡çµ„)
- [è¨˜æ†¶ç³»çµ±](#è¨˜æ†¶ç³»çµ±)
- [å°ˆæ¡ˆçµæ§‹](#å°ˆæ¡ˆçµæ§‹)

---

## æ¦‚è¿°

æœ¬ç³»çµ±å”èª¿å¤šå€‹ AI Agent å”ä½œç”Ÿæˆã€å„ªåŒ–ã€è¾¯è«–ä¸¦é¸å‡ºæœ€ä½³ Markmapã€‚ç³»çµ±å¾ metadata èˆ‡ ontology è¼¸å…¥å‡ºç™¼ï¼Œåˆ©ç”¨ **LangGraph** çš„ State + Graph ç¯„å¼å¯¦ç¾å¯æ§çš„ Agent ç·¨æ’ã€‚

### æ ¸å¿ƒç‰¹é»

| ç‰¹é» | èªªæ˜ |
|------|------|
| **å¤šæ¨¡å‹æ”¯æ´** | æ¯å€‹ Agent è§’è‰²å¯é…ç½®ä¸åŒçš„ LLM |
| **å¤šèªè¨€** | åŒæ™‚ç”Ÿæˆè‹±æ–‡èˆ‡ç¹é«”ä¸­æ–‡ Markmap |
| **è¿­ä»£å„ªåŒ–** | å¯é…ç½® N è¼ªå„ªåŒ–èˆ‡è¾¯è«– |
| **è¨˜æ†¶ç³»çµ±** | æ”¯æ´çŸ­æœŸè¨˜æ†¶ï¼ˆSTMï¼‰èˆ‡é•·æœŸè¨˜æ†¶ï¼ˆLTMï¼‰ |
| **å…§å®¹å£“ç¸®** | è¶…éé–¾å€¼æ™‚è‡ªå‹•æ‘˜è¦å£“ç¸® |
| **å¯é…ç½®æµç¨‹** | æ‰€æœ‰åƒæ•¸çš†å¯é€é YAML é…ç½®èª¿æ•´ |

---

## ç³»çµ±æ¶æ§‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      AI Markmap Agent ç³»çµ±                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚   é€šæ‰      â”‚    â”‚   å°ˆæ‰      â”‚    â”‚   å„ªåŒ–è€…    â”‚             â”‚
â”‚  â”‚   Agents    â”‚    â”‚   Agents    â”‚    â”‚   Agents    â”‚             â”‚
â”‚  â”‚  (EN / ZH)  â”‚    â”‚  (EN / ZH)  â”‚    â”‚ (2-3 å€‹è§’è‰²)â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚         â”‚                  â”‚                  â”‚                     â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â”‚                            â–¼                                        â”‚
â”‚                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                               â”‚
â”‚                   â”‚    ç¸½çµè€…       â”‚                               â”‚
â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                               â”‚
â”‚                            â–¼                                        â”‚
â”‚                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                               â”‚
â”‚                   â”‚    è©•æ–·è€…       â”‚                               â”‚
â”‚                   â”‚   (è©•ä¼°æŠ•ç¥¨)    â”‚                               â”‚
â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                               â”‚
â”‚                            â–¼                                        â”‚
â”‚                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                               â”‚
â”‚                   â”‚   æœ€çµ‚è¼¸å‡º      â”‚                               â”‚
â”‚                   â”‚ (Markmap HTML)  â”‚                               â”‚
â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                               â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                       å…±äº«å…ƒä»¶                                â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚   STM    â”‚  â”‚   LTM    â”‚  â”‚   å£“ç¸®   â”‚  â”‚   é…ç½®è¼‰å…¥   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ (çŸ­æœŸ)   â”‚  â”‚ (å‘é‡åº«) â”‚  â”‚  (æ‘˜è¦)  â”‚  â”‚              â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## å·¥ä½œæµç¨‹éšæ®µ

### ç¬¬ä¸€éšæ®µï¼šåŸå§‹ Markmap ç”Ÿæˆï¼ˆBaseline Generationï¼‰

ä¸¦è¡Œç”Ÿæˆ 4 ä»½åˆå§‹ Markmapï¼š

| Agent é¡å‹ | èªè¨€ | æ¨¡å‹ï¼ˆå¯é…ç½®ï¼‰ | è¼¸å‡ºæª”æ¡ˆ |
|------------|------|---------------|----------|
| é€šæ‰ (Generalist) | English | `gpt-4-turbo` | `markmap_general_en.md` |
| é€šæ‰ (Generalist) | ç¹é«”ä¸­æ–‡ | `gpt-4-turbo` | `markmap_general_zh.md` |
| å°ˆæ‰ (Specialist) | English | `gpt-4-turbo` | `markmap_specialist_en.md` |
| å°ˆæ‰ (Specialist) | ç¹é«”ä¸­æ–‡ | `gpt-4-turbo` | `markmap_specialist_zh.md` |

**è§’è‰²å®šä½ï¼š**
- **é€šæ‰**ï¼šå„ªåŒ–ç›®æ¨™ç‚ºå»£æ³›ç†è§£ã€çŸ¥è­˜çµ„ç¹”ã€å…¨å±€è¦–è§’
- **å°ˆæ‰**ï¼šå„ªåŒ–ç›®æ¨™ç‚ºå·¥ç¨‹ç´°ç¯€ã€çµæ§‹åš´è¬¹ã€å¯¦ä½œå°å‘

### ç¬¬äºŒéšæ®µï¼šå¤šè§’è‰²å„ªåŒ–èˆ‡è¾¯è«–ï¼ˆIterative Optimization & Debateï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    å„ªåŒ–è¿´åœˆï¼ˆN è¼ªï¼‰                              â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚  å„ªåŒ–è€… 1   â”‚ â†â†’  â”‚  å„ªåŒ–è€… 2   â”‚ â†â†’  â”‚  å„ªåŒ–è€… 3   â”‚       â”‚
â”‚  â”‚  (çµæ§‹)     â”‚     â”‚  (èªç¾©)     â”‚     â”‚  (å¯è®€æ€§)   â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚         â”‚                   â”‚                   â”‚               â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                             â–¼                                   â”‚
â”‚                   æ‰€æœ‰æ„è¦‹äº’ç›¸å¯è¦‹                               â”‚
â”‚                             â”‚                                   â”‚
â”‚                             â–¼                                   â”‚
â”‚                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚
â”‚                   â”‚     ç¸½çµè€…      â”‚                           â”‚
â”‚                   â”‚  (æœ¬è¼ªæ‘˜è¦)     â”‚                           â”‚
â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**é—œéµç‰¹é»ï¼š**
- 2ï½3 å€‹å„ªåŒ–è€… Agentï¼ˆå¯é…ç½®ï¼‰
- æ¯å€‹ Agent å¯ä½¿ç”¨ä¸åŒæ¨¡å‹
- æ‰€æœ‰ Agent å¯è¦‹å½¼æ­¤çš„è¨è«–å…§å®¹
- åƒ…ç¬¬ä¸€æ¬¡é¤µå…¥å®Œæ•´ metadataï¼Œå¾ŒçºŒè¼ªæ¬¡åƒ…é¤µå…¥ï¼š
  - å‰ä¸€è¼ª Markmap
  - è¨è«–ç´€éŒ„
  - ç¸½çµçµæœ

### ç¬¬ä¸‰éšæ®µï¼šæ¯è¼ªç¸½çµèˆ‡ Markmap ç”¢ç”Ÿ

æ¯ä¸€è¼ªå„ªåŒ–çµæŸå¾Œï¼š
- **ç¸½çµè€… Agent** å½™æ•´æ‰€æœ‰å„ªåŒ–èˆ‡è¾¯è«–å…§å®¹
- è¼¸å‡ºï¼š
  - è©²è¼ªç‰ˆæœ¬çš„ Markmap Markdown
  - è©²è¼ªæ±ºç­–æ‘˜è¦ï¼ˆä¾›ä¸‹è¼ªä½¿ç”¨ï¼‰

### ç¬¬å››éšæ®µï¼šæœ€çµ‚è©•æ–·èˆ‡é¸æ“‡ï¼ˆFinal Evaluation & Debateï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         æœ€çµ‚è©•æ–·                                 â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚  â”‚  è©•æ–·è€… 1   â”‚    è¾¯è«–      â”‚  è©•æ–·è€… 2   â”‚                  â”‚
â”‚  â”‚  (å“è³ª)     â”‚ â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ â”‚ (å®Œæ•´æ€§)    â”‚                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚         â”‚                            â”‚                          â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â”‚                      â–¼                                          â”‚
â”‚             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                 â”‚
â”‚             â”‚   æŠ•ç¥¨ / å…±è­˜   â”‚                                 â”‚
â”‚             â”‚   é¸å‡ºæœ€çµ‚ç‰ˆæœ¬  â”‚                                 â”‚
â”‚             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                 â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**è¼¸å…¥ï¼š**
- æ‰€æœ‰å€™é¸ Markmap
- å„è¼ªæ‘˜è¦

**è©•ä¼°ç¶­åº¦ï¼š**
- çµæ§‹å“è³ª
- çŸ¥è­˜å®Œæ•´æ€§
- å¯è®€æ€§
- å¯¦ç”¨æ€§

### ç¬¬äº”éšæ®µï¼šæœ€çµ‚è¼¸å‡º

- âœ… åƒ…é‡å°æœ€çµ‚é¸å®šçš„ Markmap è½‰æ›ç‚º `markmap.html`
- âŒ å…¶ä»–ç‰ˆæœ¬ä¸è½‰ HTMLï¼Œåƒ…ä½œç‚ºæ­·å²ç´€éŒ„ï¼ˆå¯é¸ï¼‰

---

## å®‰è£

```bash
# å»ºç«‹è™›æ“¬ç’°å¢ƒ
python -m venv venv

# å•Ÿç”¨è™›æ“¬ç’°å¢ƒ (Windows)
.\venv\Scripts\activate

# å•Ÿç”¨è™›æ“¬ç’°å¢ƒ (Unix/macOS)
source venv/bin/activate

# å®‰è£ä¾è³´
pip install -r requirements.txt
```

---

## API Key è™•ç†

> âš ï¸ **é‡è¦å®‰å…¨è¨­è¨ˆ**ï¼šAPI Key åƒ…åœ¨åŸ·è¡ŒæœŸé–“è¼¸å…¥ä¸€æ¬¡ï¼Œ**çµ•ä¸å„²å­˜**ã€‚

### åŸ·è¡ŒæœŸé–“è¼¸å…¥

```bash
# å•Ÿå‹•ç¨‹å¼æ™‚æœƒæç¤ºè¼¸å…¥ API Key
python main.py

# è¼¸å‡ºç¯„ä¾‹ï¼š
# ============================================================
# API Key Input
# ============================================================
# Enter your API keys below.
# Keys are NOT stored and will be cleared when program exits.
# ============================================================
#
# Enter OPENAI API Key: ********
#   âœ“ OPENAI API key accepted
```

### å®‰å…¨ç‰¹æ€§

| ç‰¹æ€§ | èªªæ˜ |
|------|------|
| **ä¸å„²å­˜** | Key åƒ…å­˜åœ¨è¨˜æ†¶é«”ä¸­ï¼Œä¸å¯«å…¥ä»»ä½•æª”æ¡ˆ |
| **å®‰å…¨è¼¸å…¥** | ä½¿ç”¨ `getpass` éš±è—è¼¸å…¥å…§å®¹ |
| **ç¨‹å¼çµæŸæ¸…é™¤** | é€é `atexit` è¨»å†Šï¼Œç¨‹å¼çµæŸæ™‚è‡ªå‹•æ¸…é™¤ |
| **æ‰‹å‹•æ¸…é™¤** | å¯éš¨æ™‚å‘¼å« `ConfigLoader.clear_api_keys()` |

### å‘½ä»¤åˆ—é¸é …

```bash
# è·³é OpenAI key è¼¸å…¥
python main.py --no-openai

# è·³é Anthropic key è¼¸å…¥
python main.py --no-anthropic

# åƒ…è¼‰å…¥è³‡æ–™ä¾†æºï¼Œä¸åŸ·è¡Œ pipeline
python main.py --dry-run
```

### ä¾è³´å¥—ä»¶

```
langgraph>=1.0.4
langchain>=0.3.0
langchain-openai>=0.2.0
langchain-anthropic>=0.2.0
langchain-community>=0.3.0
chromadb>=0.4.0
pyyaml>=6.0
tiktoken>=0.5.0
```

---

## é…ç½®

æ‰€æœ‰è¨­å®šçš†é€é `config/config.yaml` ç®¡ç†ã€‚

### è³‡æ–™ä¾†æºé…ç½®

åœ¨ `data_sources` å€æ®µä¸­è¨­å®šè¦è®€å–çš„è³‡æ–™ä¾†æºï¼š

```yaml
# ===== è³‡æ–™ä¾†æºé…ç½® =====
data_sources:
  # åŸºç¤è·¯å¾‘ï¼ˆç›¸å°æ–¼å°ˆæ¡ˆæ ¹ç›®éŒ„ï¼‰
  base_paths:
    ontology: "../../ontology"
    problems: "../../meta/problems"
    patterns: "../../meta/patterns"
    roadmaps: "../../roadmaps"

  # Ontology æª”æ¡ˆ - åˆ†é¡å®šç¾©
  ontology:
    enabled: true
    files:
      - name: "algorithms"
        path: "algorithms.toml"
        enabled: true
      - name: "patterns"
        path: "patterns.toml"
        enabled: true
      # è¨­å®š enabled: false å¯åœç”¨ç‰¹å®šæª”æ¡ˆ
      - name: "companies"
        path: "companies.toml"
        enabled: false

  # é¡Œç›® metadata æª”æ¡ˆ
  problems:
    enabled: true
    load_mode: "pattern"  # "all" | "list" | "pattern"
    patterns:
      - "*.toml"
    exclude:
      - "README.md"

  # Pattern æ–‡ä»¶ç›®éŒ„
  patterns:
    enabled: true
    directories:
      - name: "sliding_window"
        path: "sliding_window"
        enabled: true
      - name: "two_pointers"
        path: "two_pointers"
        enabled: true

  # Roadmap å­¸ç¿’è·¯å¾‘
  roadmaps:
    enabled: true
    files:
      - name: "sliding_window_path"
        path: "sliding_window_path.toml"
        enabled: true
```

### æ¨¡å‹é…ç½®

```yaml
# ===== æ¨¡å‹é…ç½® =====
models:
  generalist:
    en: "gpt-4-turbo"
    zh: "gpt-4-turbo"
  specialist:
    en: "gpt-4-turbo"
    zh: "gpt-4-turbo"
  optimizer:
    - model: "gpt-4-turbo"
      prompt_path: "prompts/optimizer_structure.txt"
    - model: "claude-3-opus"
      prompt_path: "prompts/optimizer_semantic.txt"
  summarizer:
    model: "gpt-4-turbo"
    prompt_path: "prompts/summarizer.txt"
  judges:
    - model: "gpt-4-turbo"
      prompt_path: "prompts/judge_quality.txt"
    - model: "claude-3-opus"
      prompt_path: "prompts/judge_completeness.txt"
  compressor:
    model: "gpt-3.5-turbo"

# ===== æµç¨‹é…ç½® =====
workflow:
  optimization_rounds: 3        # å„ªåŒ–è¼ªæ•¸
  optimizer_count: 3            # å„ªåŒ–è€…æ•¸é‡
  judge_count: 2                # è©•æ–·è€…æ•¸é‡
  max_tokens_before_compress: 8000  # è¶…éæ­¤é•·åº¦å•Ÿç”¨å£“ç¸®

# ===== è¨˜æ†¶é…ç½® =====
memory:
  stm_enabled: true
  ltm_enabled: true
  ltm_vector_store: "chromadb"
  ltm_collection_name: "markmap_decisions"

# ===== è¼¸å‡ºé…ç½® =====
output:
  save_intermediate: true
  intermediate_dir: "outputs/intermediate"
  final_dir: "outputs/final"
```

---

## ä½¿ç”¨æ–¹å¼

### ç¨‹å¼ç¢¼ä½¿ç”¨

```python
from src.graph import build_markmap_graph

# å»ºæ§‹ Graph
graph = build_markmap_graph()

# æº–å‚™åˆå§‹è¼¸å…¥
initial_state = {
    "metadata": your_metadata_dict,
    "ontology": your_ontology_dict,
}

# åŸ·è¡Œæµç¨‹
result = graph.invoke(
    initial_state,
    config={"configurable": {"thread_id": "session-1"}}
)

# å–å¾—çµæœ
print(result["final_selection"])  # æœ€çµ‚ Markmap
print(result["final_html"])       # HTML è¼¸å‡ºè·¯å¾‘
```

### å‘½ä»¤åˆ—ä½¿ç”¨

```bash
python main.py --metadata data/metadata.json --ontology data/ontology.json
```

---

## Agent èƒ½åŠ›æ¨¡çµ„

æ¯å€‹å„ªåŒ–è€…/è¾¯è«–è€… Agent éƒ½å¿…é ˆå…·å‚™ä»¥ä¸‹èªçŸ¥æ¨¡çµ„ï¼š

### ğŸ§  è¦åŠƒï¼ˆPlanningï¼‰
- æ˜ç¢ºå®šç¾©å„ªåŒ–ç›®æ¨™ï¼ˆçµæ§‹ã€å±¤ç´šã€å‘½åã€æŠ½è±¡ç¨‹åº¦ï¼‰

### ğŸ§© ä»»å‹™åˆ†è§£ï¼ˆSubgoal & Decompositionï¼‰
å°‡ Markmap æ”¹é€²æ‹†è§£ç‚ºï¼š
- ç¯€é»çµæ§‹
- åˆ†é¡å±¤æ¬¡
- èªç¾©ä¸€è‡´æ€§
- å·¥ç¨‹å¯è®€æ€§

### ğŸ” åæ€èˆ‡æ”¹é€²ï¼ˆReflection & Refinementï¼‰
- è©•ä¼°å‰ä¸€è¼ªçµæœçš„å•é¡Œ
- èª¿æ•´ç­–ç•¥é¿å…é‡è¤‡éŒ¯èª¤

---

## è¨˜æ†¶ç³»çµ±

### çŸ­æœŸè¨˜æ†¶ï¼ˆSTMï¼‰

ç¶­è­·ç•¶å‰æœƒè©±çš„ä¸Šä¸‹æ–‡ï¼š
- ç•¶å‰è¼ªå°è©±
- ç•¶å‰ Markmap ç‹€æ…‹
- è¿‘æœŸæ±ºç­–

| å±¬æ€§ | èªªæ˜ |
|------|------|
| ç¯„åœ | ç•¶å‰æœƒè©± |
| å¯¦ä½œ | In-memory dict |
| ç”¨é€” | ç¶­æŒå°è©±é€£è²«æ€§ |

### é•·æœŸè¨˜æ†¶ï¼ˆLTMï¼‰

è·¨æœƒè©±æŒä¹…åŒ–ï¼Œä½¿ç”¨ Vector Storeï¼š
- å„ªåŒ–åŸå‰‡
- æ­·å²æ±ºç­–æ‘˜è¦
- é€éèªç¾©æœå°‹æª¢ç´¢ç›¸é—œä¸Šä¸‹æ–‡

| å±¬æ€§ | èªªæ˜ |
|------|------|
| ç¯„åœ | è·¨æœƒè©± |
| å¯¦ä½œ | ChromaDB / Pinecone / FAISS |
| ç”¨é€” | ç´¯ç©å„ªåŒ–ç¶“é©— |

```python
# LTM æŸ¥è©¢ç¯„ä¾‹
relevant_decisions = query_ltm(
    query="å¦‚ä½•çµ„ç¹”æ¼”ç®—æ³•è¤‡é›œåº¦ç¯€é»ï¼Ÿ",
    k=5
)
```

---

## å°ˆæ¡ˆçµæ§‹

```
ai-markmap-agent/
â”œâ”€â”€ config/
â”‚   â””â”€â”€ config.yaml              # å…¨åŸŸé…ç½®
â”œâ”€â”€ prompts/
â”‚   â”œâ”€â”€ generalist_en.txt        # é€šæ‰æç¤ºè©ï¼ˆENï¼‰
â”‚   â”œâ”€â”€ generalist_zh.txt        # é€šæ‰æç¤ºè©ï¼ˆZHï¼‰
â”‚   â”œâ”€â”€ specialist_en.txt        # å°ˆæ‰æç¤ºè©ï¼ˆENï¼‰
â”‚   â”œâ”€â”€ specialist_zh.txt        # å°ˆæ‰æç¤ºè©ï¼ˆZHï¼‰
â”‚   â”œâ”€â”€ optimizer_structure.txt  # çµæ§‹å„ªåŒ–è€…æç¤ºè©
â”‚   â”œâ”€â”€ optimizer_semantic.txt   # èªç¾©å„ªåŒ–è€…æç¤ºè©
â”‚   â”œâ”€â”€ optimizer_readability.txt# å¯è®€æ€§å„ªåŒ–è€…æç¤ºè©
â”‚   â”œâ”€â”€ summarizer.txt           # ç¸½çµè€…æç¤ºè©
â”‚   â”œâ”€â”€ judge_quality.txt        # å“è³ªè©•æ–·è€…æç¤ºè©
â”‚   â””â”€â”€ judge_completeness.txt   # å®Œæ•´æ€§è©•æ–·è€…æç¤ºè©
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ config_loader.py         # é…ç½®è¼‰å…¥å™¨
â”‚   â”œâ”€â”€ state.py                 # State å®šç¾©ï¼ˆTypedDictï¼‰
â”‚   â”œâ”€â”€ graph.py                 # ä¸» Graph å»ºæ§‹
â”‚   â”œâ”€â”€ agents/
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ base_agent.py        # Agent åŸºé¡
â”‚   â”‚   â”œâ”€â”€ generator.py         # é€šæ‰/å°ˆæ‰ç”Ÿæˆå™¨
â”‚   â”‚   â”œâ”€â”€ optimizer.py         # å„ªåŒ–/è¾¯è«– Agent
â”‚   â”‚   â”œâ”€â”€ summarizer.py        # ç¸½çµè€…
â”‚   â”‚   â””â”€â”€ judge.py             # è©•æ–·è€…
â”‚   â”œâ”€â”€ memory/
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ stm.py               # çŸ­æœŸè¨˜æ†¶
â”‚   â”‚   â””â”€â”€ ltm.py               # é•·æœŸè¨˜æ†¶ï¼ˆVector Storeï¼‰
â”‚   â”œâ”€â”€ compression/
â”‚   â”‚   â””â”€â”€ compressor.py        # é•·å…§å®¹å£“ç¸®
â”‚   â””â”€â”€ output/
â”‚       â””â”€â”€ html_converter.py    # Markmap â†’ HTML è½‰æ›
â”œâ”€â”€ outputs/
â”‚   â”œâ”€â”€ intermediate/            # ä¸­é–“ç”¢ç‰©
â”‚   â””â”€â”€ final/                   # æœ€çµ‚è¼¸å‡º
â”œâ”€â”€ tests/
â”‚   â””â”€â”€ ...                      # æ¸¬è©¦æª”æ¡ˆ
â”œâ”€â”€ requirements.txt
â”œâ”€â”€ main.py                      # åŸ·è¡Œå…¥å£
â”œâ”€â”€ README.md                    # English documentation
â””â”€â”€ README_zh-TW.md             # æœ¬æ–‡ä»¶
```

---

## æ¨¡çµ„è·è²¬

| æ¨¡çµ„ | è¡Œæ•¸ | è·è²¬ |
|------|------|------|
| `config_loader.py` | ~50 | è¼‰å…¥èˆ‡é©—è­‰ YAML é…ç½® |
| `state.py` | ~60 | å®šç¾©å…±äº« State TypedDict |
| `graph.py` | ~150 | å»ºæ§‹ LangGraph StateGraph |
| `generator.py` | ~120 | é€šæ‰/å°ˆæ‰ Markmap ç”Ÿæˆ |
| `optimizer.py` | ~200 | å„ªåŒ–ã€è¦åŠƒã€åæ€ |
| `summarizer.py` | ~80 | è¼ªæ¬¡ç¸½çµ |
| `judge.py` | ~150 | æœ€çµ‚è©•æ–·èˆ‡æŠ•ç¥¨ |
| `stm.py` | ~40 | çŸ­æœŸè¨˜æ†¶æ“ä½œ |
| `ltm.py` | ~100 | é•·æœŸè¨˜æ†¶èˆ‡ Vector Store |
| `compressor.py` | ~60 | å…§å®¹å£“ç¸®/æ‘˜è¦ |
| `html_converter.py` | ~50 | Markmap MD â†’ HTML è½‰æ› |

---

## é•·å…§å®¹è™•ç†

ç•¶ä»¥ä¸‹å…§å®¹éé•·æ™‚ï¼Œç³»çµ±æœƒè‡ªå‹•å•Ÿç”¨å£“ç¸®ï¼š

| å…§å®¹é¡å‹ | é–¾å€¼ | è™•ç†æ–¹å¼ |
|----------|------|----------|
| è¨è«–ç´€éŒ„ | 8000 tokens | æ‘˜è¦å£“ç¸® |
| Markmap ç¯€é» | éå¤š | çµæ§‹åŒ–æ‘˜è¦ |
| Metadata | éå¤§ | é¸æ“‡æ€§æ‘˜è¦ |

å£“ç¸®æ¨¡å‹ï¼š
- ç”± config æŒ‡å®š
- å¯èˆ‡ä¸»æ¨¡å‹ä¸åŒï¼ˆå»ºè­°ä½¿ç”¨è¼ƒä¾¿å®œçš„æ¨¡å‹å¦‚ `gpt-3.5-turbo`ï¼‰

---

## æµç¨‹åœ–

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           START                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                       â”‚                       â”‚
        â–¼                       â–¼                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ é€šæ‰ EN       â”‚     â”‚ é€šæ‰ ZH       â”‚     â”‚ å°ˆæ‰ EN       â”‚ ...
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                     â”‚                     â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   æ”¶é›† Baseline â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚           è¿´åœˆï¼ˆN è¼ªï¼‰               â”‚
          â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
          â”‚  â”‚       å£“ç¸®ï¼ˆè‹¥éœ€è¦ï¼‰            â”‚ â”‚
          â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
          â”‚                  â–¼                  â”‚
          â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
          â”‚  â”‚   å„ªåŒ–ï¼ˆæ‰€æœ‰ Agent äº’ç›¸å¯è¦‹ï¼‰  â”‚ â”‚
          â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
          â”‚                  â–¼                  â”‚
          â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
          â”‚  â”‚           ç¸½çµ                 â”‚ â”‚
          â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
          â”‚                  â”‚                  â”‚
          â”‚      è¼ªæ•¸ < N? â”€â”€â”´â”€â–º ç¹¼çºŒ           â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚ è¼ªæ•¸ >= N
                             â–¼
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚   æœ€çµ‚è©•æ–·      â”‚
                   â”‚  ï¼ˆè©•æ–·è€…è¾¯è«–ï¼‰ â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â–¼
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚  è½‰æ›ç‚º HTML    â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â–¼
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚      END        â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## æˆæ¬Š

MIT License - è©³è¦‹ [LICENSE](LICENSE)

---

## è²¢ç»

1. Fork æ­¤å„²å­˜åº«
2. å»ºç«‹åŠŸèƒ½åˆ†æ”¯
3. é€²è¡Œä¿®æ”¹
4. åŸ·è¡Œæ¸¬è©¦ï¼š`python -m pytest tests/ -q`
5. æäº¤ Pull Request

---

## ç›¸é—œè³‡æº

- [LangGraph å®˜æ–¹æ–‡ä»¶](https://langchain-ai.github.io/langgraph/)
- [LangChain å®˜æ–¹æ–‡ä»¶](https://python.langchain.com/)
- [Markmap](https://markmap.js.org/)

